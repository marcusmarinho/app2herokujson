<div class="container">

  <ng-template [ngIf]="order !== undefined" [ngIfElse]="errorHandle">
    <h1 class="secao">Alterar Pedido</h1>
  </ng-template>

  <ng-template #errorHandle>
    <h1 class="secao-danger">Pedido não encontrado</h1>
  </ng-template>

  <div class="flex-search">
    <mat-form-field class="input-width">
      <input type="number" matInput placeholder="Digite o Numero do Pedido" [formControl]="numPedido">
    </mat-form-field>
    <button mat-button type="submit" (click)=efetuaConsulta() color="primary">Consultar</button>
  </div>

  <div class="flex-form">

    <form [formGroup]="form" novalidate>


      <h2>Dados de Entrega</h2>

      <mat-form-field class="example-full-width">
        <input type="text" formControlName="endereco" matInput placeholder="Endereço">
      </mat-form-field>

      <mat-form-field class="example-full-width">
        <input type="number" formControlName="numero" matInput placeholder="Número">
      </mat-form-field>

      <mat-form-field class="example-full-width">
        <input type="text" formControlName="complemento" matInput placeholder="Complemento">
      </mat-form-field>

      <h2>Dados de Pagamento</h2>

      <mat-form-field class="example-full-width">
        <input type="text" formControlName="formaDePagamento" matInput placeholder="Forma de Pagamento">
      </mat-form-field>

      <button class="teste" *ngIf="controle" mat-button  (click)="alterOrder()" color="primary">Alterar</button>
    </form>

    <div *ngIf="order !== undefined">
      <div class="flex-item-card" *ngFor="let item of order.itens">
        <mat-card class="material-card">
          <mat-card-header>

            <mat-card-title class="card-title"> {{ item.titulo }}</mat-card-title>

          </mat-card-header>

          <img mat-card-image [src]="item.img.url">
          <mat-card-content class="card-description">
            <p>{{ item.descricao_oferta }}</p>
            <p>Quantidade: {{ item.quantidade }}</p>
            <p>{{ item.quantidade * item.valor | currency: 'BRL' }}</p>
            <p>{{ totalValueOrder() | currency:'BRL':true}}</p>
          </mat-card-content>
        </mat-card>
      </div>
    </div>


  </div>
</div>
